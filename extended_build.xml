<?xml version="1.0" encoding="UTF-8"?>
<project>
    <property name="extended.basedir" location="${basedir}/build" />

    <property name="config.directory" location="${extended.basedir}/config" />
    <property name="externals.directory" location="${extended.basedir}/externals" />
    <property name="subscripts.directory" location="${extended.basedir}/subscripts" />
    <property name="subscripts.test.project.directory"
            location="${subscripts.directory}/test_project" />
    <property name="results.directory" location="${basedir}/results" />

    <property file="${config.directory}/extension.properties" />

    <!-- Clean workspace.
         This target does not have description attribute. Because this target
         is private from build.xml.
     -->
    <target name="clean-all" depends="clean">
        <delete dir="${results.directory}" />
    </target>

    <if condition="${findbugs.enable}">
        <then>
            <import file="${subscripts.directory}/findbugs.xml" />
        </then>
    </if>

    <if condition="${test.enable}">
        <then>
            <import file="${subscripts.directory}/run-tests.xml" />
        </then>
    </if>

    <!-- Run FindBugs if findbugs.enalbe is set. -->
    <target name="-findbugs-if-enabled" if="${findbugs.enable}">
        <antcall target="findbugs" />
    </target>

    <!-- Run private build. -->
    <target name="private-build" depends="-findbugs-if-enabled, debug"
            description="Run private build." />

    <!-- Run private build after clean-all. -->
    <target name="private-build-after-clean" depends="clean-all, private-build"
            description="Run clean-all and private-build " />

</project>